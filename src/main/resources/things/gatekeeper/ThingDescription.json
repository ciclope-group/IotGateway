{
  "type": "Thing",
  "name": "gatekeeper",
  "base": "http://wotgate.om.fi.upm.es/things/gatekeeper/",
  "interactions": [
    {
      "id": "state",
      "type": "Property",
      "name": "state",
      "outputData": {
        "valueType": {
          "type": "object",
          "properties": {
            "registeredUsers": {
              "type": "integer"
            },
            "registeredRoles": {
              "type": "integer"
            },
            "authenticatedOnlineUsers": {
              "type": "integer"
            },
            "onlineUsersPerRole": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "roleName": {
                    "type": "string"
                  },
                  "onlineUsers": {
                    "type": "integer"
                  }
                }
              },
              "minItems": 1
            },
            "maximumUserReservationPerDate": {
              "type": "integer"
            },
            "reservationTime": {
              "type": "integer"
            },
            "ackReservation": {
              "type": "boolean"
            },
            "operatingStatus": {
              "enum": [
                "OK",
                "ERROR",
                "UNKNOWN"
              ]
            },
            "timestamp": {
              "type": "string"
            }
          }
        }
      },
      "writable": false,
      "links": [
        {
          "href": "state",
          "mediaType": "application/json"
        }
      ]
    },
    {
      "type": "Action",
      "name": "getAllRoles",
      "method": "post",
      "roleBasedAccessControl": "Administrator",
      "outputData": {
        "valueType": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string"
              },
              "userNames": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "dateCreated": {
                "type": "string"
              },
              "dateModified": {
                "type": "string"
              }
            }
          },
          "minItems": 0
        }
      },
      "links": [
        {
          "href": "getAllRoles",
          "mediaType": "application/json"
        }
      ]
    },
    {
      "type": "Action",
      "name": "getRoleByName",
      "method": "post",
      "roleBasedAccessControl": "Administrator",
      "inputData": {
        "valueType": {
          "type": "object",
          "properties": {
            "name": {
              "type": "string"
            }
          }
        }
      },
      "outputData": {
        "valueType": {
          "type": "object",
          "properties": {
            "name": {
              "type": "string"
            },
            "userNames": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "dateCreated": {
              "type": "string"
            },
            "dateModified": {
              "type": "string"
            }
          }
        }
      },
      "links": [
        {
          "href": "getRoleByName",
          "mediaType": "application/json"
        }
      ]
    },
    {
      "type": "Action",
      "name": "getRolesByLevel",
      "method": "post",
      "roleBasedAccessControl": "Administrator",
      "inputData": {
        "valueType": {
          "type": "object",
          "properties": {
            "level": {
              "type": "integer"
            }
          }
        }
      },
      "outputData": {
        "valueType": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string"
              },
              "userNames": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "dateCreated": {
                "type": "string"
              },
              "dateModified": {
                "type": "string"
              }
            }
          },
          "minItems": 0
        }
      },
      "links": [
        {
          "href": "getRolesByLevel",
          "mediaType": "application/json"
        }
      ]
    },
    {
      "type": "Action",
      "name": "addRole",
      "method": "post",
      "roleBasedAccessControl": "Administrator",
      "inputData": {
        "valueType": {
          "type": "object",
          "properties": {
            "name": {
              "type": "string"
            },
            "level": {
              "type": "integer"
            }
          }
        }
      },
      "links": [
        {
          "href": "addRole",
          "mediaType": "application/json"
        }
      ]
    },
    {
      "type": "Action",
      "name": "addUserToRole",
      "method": "post",
      "roleBasedAccessControl": "Administrator",
      "inputData": {
        "valueType": {
          "type": "object",
          "properties": {
            "userName": {
              "type": "string"
            },
            "roleName": {
              "type": "string"
            }
          }
        }
      },
      "links": [
        {
          "href": "addUserToRole",
          "mediaType": "application/json"
        }
      ]
    },
    {
      "type": "Action",
      "name": "deleteUserFromRole",
      "method": "post",
      "roleBasedAccessControl": "Administrator",
      "inputData": {
        "valueType": {
          "type": "object",
          "properties": {
            "userName": {
              "type": "string"
            },
            "roleName": {
              "type": "string"
            }
          }
        }
      },
      "links": [
        {
          "href": "deleteUserFromRole",
          "mediaType": "application/json"
        }
      ]
    },
    {
      "type": "Action",
      "name": "deleteRoleByName",
      "method": "post",
      "roleBasedAccessControl": "Administrator",
      "inputData": {
        "valueType": {
          "type": "object",
          "properties": {
            "name": {
              "type": "string"
            }
          }
        }
      },
      "links": [
        {
          "href": "deleteRoleByName",
          "mediaType": "application/json"
        }
      ]
    },
    {
      "type": "Action",
      "name": "getAllUsers",
      "method": "post",
      "roleBasedAccessControl": "Administrator",
      "outputData": {
        "valueType": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string"
              },
              "email": {
                "type": "string"
              },
              "roleNames": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "validated": {
                "type": "integer"
              },
              "online": {
                "type": "integer"
              },
              "dateCreated": {
                "type": "string"
              },
              "dateModified": {
                "type": "string"
              }
            }
          },
          "minItems": 0
        }
      },
      "links": [
        {
          "href": "getAllUsers",
          "mediaType": "application/json"
        }
      ]
    },
    {
      "type": "Action",
      "name": "getUser",
      "method": "post",
      "roleBasedAccessControl": "Authenticated",
      "outputData": {
        "valueType": {
          "type": "object",
          "properties": {
            "name": {
              "type": "string"
            },
            "email": {
              "type": "string"
            },
            "roleNames": {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          }
        }
      },
      "links": [
        {
          "href": "getUser",
          "mediaType": "application/json"
        }
      ]
    },
    {
      "type": "Action",
      "name": "getUserByName",
      "method": "post",
      "roleBasedAccessControl": "Administrator",
      "outputData": {
        "inputData": {
          "valueType": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string"
              }
            }
          }
        },
        "valueType": {
          "type": "object",
          "properties": {
            "name": {
              "type": "string"
            },
            "email": {
              "type": "string"
            },
            "roleNames": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "validated": {
              "type": "integer"
            },
            "online": {
              "type": "integer"
            },
            "dateCreated": {
              "type": "string"
            },
            "dateModified": {
              "type": "string"
            }
          }
        }
      },
      "links": [
        {
          "href": "getUserByName",
          "mediaType": "application/json"
        }
      ]
    },
    {
      "type": "Action",
      "name": "getUserByEmail",
      "method": "post",
      "roleBasedAccessControl": "Administrator",
      "outputData": {
        "inputData": {
          "valueType": {
            "type": "object",
            "properties": {
              "email": {
                "type": "string"
              }
            }
          }
        },
        "valueType": {
          "type": "object",
          "properties": {
            "name": {
              "type": "string"
            },
            "email": {
              "type": "string"
            },
            "roleNames": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "validated": {
              "type": "integer"
            },
            "online": {
              "type": "integer"
            },
            "dateCreated": {
              "type": "string"
            },
            "dateModified": {
              "type": "string"
            }
          }
        }
      },
      "links": [
        {
          "href": "getUserByEmail",
          "mediaType": "application/json"
        }
      ]
    },
    {
      "type": "Action",
      "name": "deleteUser",
      "method": "post",
      "roleBasedAccessControl": "Authenticated",
      "links": [
        {
          "href": "deleteUser",
          "mediaType": "application/json"
        }
      ]
    },
    {
      "type": "Action",
      "name": "deleteUserByName",
      "method": "post",
      "roleBasedAccessControl": "Administrator",
      "inputData": {
        "valueType": {
          "type": "object",
          "properties": {
            "name": {
              "type": "string"
            }
          }
        }
      },
      "links": [
        {
          "href": "deleteUserByName",
          "mediaType": "application/json"
        }
      ]
    },
    {
      "type": "Action",
      "name": "changeUserPassword",
      "method": "post",
      "roleBasedAccessControl": "Authenticated",
      "inputData": {
        "valueType": {
          "type": "object",
          "properties": {
            "password": {
              "type": "string"
            }
          }
        }
      },
      "links": [
        {
          "href": "changeUserPassword",
          "mediaType": "application/json"
        }
      ]
    },
    {
      "type": "Action",
      "name": "registerUser",
      "method": "post",
      "inputData": {
        "valueType": {
          "type": "object",
          "properties": {
            "name": {
              "type": "string"
            },
            "password": {
              "type": "string"
            },
            "email": {
              "type": "string"
            }
          }
        }
      },
      "links": [
        {
          "href": "registerUser",
          "mediaType": "application/json"
        }
      ]
    },
    {
      "type": "Action",
      "name": "recoverUserPassword",
      "method": "post",
      "inputData": {
        "valueType": {
          "type": "object",
          "properties": {
            "name": {
              "type": "string"
            },
            "email": {
              "type": "string"
            }
          }
        }
      },
      "links": [
        {
          "href": "recoverUserPassword",
          "mediaType": "application/json"
        }
      ]
    },
    {
      "type": "Action",
      "name": "generateUserToken",
      "method": "post",
      "outputData": {
        "valueType": {
          "type": "object",
          "properties": {
            "token": {
              "type": "string"
            },
            "expirationTime": {
              "type": "string"
            }
          }
        }
      },
      "links": [
        {
          "href": "generateUserToken",
          "mediaType": "application/json"
        }
      ]
    },
    {
      "type": "Action",
      "name": "revokeUserToken",
      "method": "post",
      "roleBasedAccessControl": "Authenticated",
      "links": [
        {
          "href": "revokeUserToken",
          "mediaType": "application/json"
        }
      ]
    },
    {
      "type": "Action",
      "name": "searchReservations",
      "method": "post",
      "roleBasedAccessControl": "Administrator",
      "inputData": {
        "valueType": {
          "type": "object",
          "properties": {
            "perPage": {
              "type": "integer"
            },
            "page": {
              "type": "integer"
            }
          }
        }
      },
      "outputData": {
        "valueType": {
          "type": "object",
          "properties": {
            "results": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "startDate": {
                    "type": "string"
                  },
                  "endDate": {
                    "type": "string"
                  },
                  "freebusy": {
                    "enum": [
                      "FREE",
                      "BUSY"
                    ]
                  },
                  "freebusytype": {
                    "enum": [
                      "RESERVATION"
                    ]
                  },
                  "reservation": {
                    "userName": {
                      "type": "string"
                    },
                    "experiment": {
                      "enum": [
                        "SOLAR",
                        "LUNAR",
                        "NONE"
                      ]
                    },
                    "dateCreated": {
                      "type": "string"
                    }
                  }
                }
              },
              "minItems": 0
            },
            "total": {
              "type": "integer"
            }
          }
        }
      },
      "links": [
        {
          "href": "searchReservations",
          "mediaType": "application/json"
        }
      ]
    },
    {
      "type": "Action",
      "name": "addUserReservation",
      "roleBasedAccessControl": "Authenticated",
      "inputData": {
        "valueType": {
          "type": "object",
          "properties": {
            "startDate": {
              "type": "string"
            },
            "experiment": {
              "enum": [
                "SOLAR",
                "LUNAR",
                "NONE"
              ]
            }
          }
        }
      },
      "links": [
        {
          "href": "addUserReservation",
          "mediaType": "application/json"
        }
      ]
    },
    {
      "type": "Action",
      "name": "deleteUserReservation",
      "method": "post",
      "roleBasedAccessControl": "Authenticated",
      "inputData": {
        "valueType": {
          "type": "object",
          "properties": {
            "startDate": {
              "type": "string"
            }
          }
        }
      },
      "links": [
        {
          "href": "deleteUserReservation",
          "mediaType": "application/json"
        }
      ]
    },
    {
      "type": "Action",
      "name": "ackReservation",
      "method": "post",
      "roleBasedAccessControl": "Authenticated",
      "links": [
        {
          "href": "deleteUserReservation",
          "mediaType": "application/json"
        }
      ]
    }
  ]
}
